{"level":"error","message":"Erreur lors de la création de la commande: Canal RabbitMQ non initialisé","stack":"Error: Canal RabbitMQ non initialisé\n    at QueueService.addToQueue (/app/src/services/QueueService.ts:43:19)\n    at OrderService.createOrder (/app/src/services/OrderService.ts:159:37)\n    at OrderController.createOrder (/app/src/controllers/OrderController.ts:58:30)","timestamp":"2025-02-24T16:03:19.625Z"}
{"body":{"items":[{"productId":"54dcfdb7-0324-454e-bed2-f7355881a3d4","quantity":1}],"userId":"22d97f24-d785-4ba8-bb0e-31db78490505"},"error":"Impossible de créer la commande","level":"error","message":"Error:","method":"POST","params":{},"path":"/api/orders","query":{},"stack":"ApiError: Impossible de créer la commande\n    at OrderService.createOrder (/app/src/services/OrderService.ts:190:19)\n    at OrderController.createOrder (/app/src/controllers/OrderController.ts:58:30)","timestamp":"2025-02-24T16:03:19.627Z"}
{"clientVersion":"6.4.1","code":"P2003","level":"error","message":"Erreur de base de données: \nInvalid `this.prisma.order.create()` invocation in\n/app/src/services/OrderService.ts:108:51\n\n  105 }, 0);\n  106 \n  107 // Créer la commande\n→ 108 const order = await this.prisma.order.create(\nForeign key constraint violated: `Order_userId_fkey (index)`","meta":{"field_name":"Order_userId_fkey (index)","modelName":"Order"},"name":"PrismaClientKnownRequestError","stack":"PrismaClientKnownRequestError: \nInvalid `this.prisma.order.create()` invocation in\n/app/src/services/OrderService.ts:108:51\n\n  105 }, 0);\n  106 \n  107 // Créer la commande\n→ 108 const order = await this.prisma.order.create(\nForeign key constraint violated: `Order_userId_fkey (index)`\n    at Un.handleRequestError (/app/node_modules/.pnpm/@prisma+client@6.4.1_prisma@6.4.1_typescript@5.7.3__typescript@5.7.3/node_modules/@prisma/client/runtime/library.js:121:7447)\n    at Un.handleAndLogRequestError (/app/node_modules/.pnpm/@prisma+client@6.4.1_prisma@6.4.1_typescript@5.7.3__typescript@5.7.3/node_modules/@prisma/client/runtime/library.js:121:6771)\n    at Un.request (/app/node_modules/.pnpm/@prisma+client@6.4.1_prisma@6.4.1_typescript@5.7.3__typescript@5.7.3/node_modules/@prisma/client/runtime/library.js:121:6478)\n    at l (/app/node_modules/.pnpm/@prisma+client@6.4.1_prisma@6.4.1_typescript@5.7.3__typescript@5.7.3/node_modules/@prisma/client/runtime/library.js:130:9644)\n    at OrderService.createOrder (/app/src/services/OrderService.ts:108:27)\n    at OrderController.createOrder (/app/src/controllers/OrderController.ts:58:30)","timestamp":"2025-02-24T17:14:14.163Z"}
{"body":{"items":[{"productId":"213bdfa9-964c-41b2-96fa-541b034043ae","quantity":1}],"userId":"81b013b7-5689-4b74-921b-2d711dbae20e"},"error":"Un ou plusieurs produits n'existent pas","level":"error","message":"Error:","method":"POST","params":{},"path":"/api/orders","query":{},"stack":"ApiError: Un ou plusieurs produits n'existent pas\n    at OrderService.createOrder (/app/src/services/OrderService.ts:190:27)\n    at OrderController.createOrder (/app/src/controllers/OrderController.ts:58:30)","timestamp":"2025-02-24T17:14:14.165Z"}
{"level":"error","message":"Produits manquants:","timestamp":"2025-02-24T17:19:53.494Z"}
{"body":{"items":[{"productId":"213bdfa9-964c-41b2-96fa-541b034043ae","quantity":1},{"productId":"213bdfa9-964c-41b2-96fa-541b034043ae","quantity":1}],"userId":"2e3daebd-b7c0-4c2b-8f1b-6f1aeba07c01"},"error":"Produits non trouvés: ","level":"error","message":"Error:","method":"POST","params":{},"path":"/api/orders","query":{},"stack":"ApiError: Produits non trouvés: \n    at OrderService.createOrder (/app/src/services/OrderService.ts:97:23)\n    at OrderController.createOrder (/app/src/controllers/OrderController.ts:58:30)","timestamp":"2025-02-24T17:19:53.506Z"}
